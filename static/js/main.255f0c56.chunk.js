(this["webpackJsonppwa-tester"]=this["webpackJsonppwa-tester"]||[]).push([[0],{14:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(1);var i=n(16),a=n(0);function c(e){var t=e.title,n=e.children;return Object(a.jsx)(i.a,{children:Object(a.jsx)("div",{className:"notch-inset-item",children:Object(a.jsx)("section",{className:"section",children:Object(a.jsxs)("div",{className:"container is-fluid",children:[Object(a.jsx)("h1",{className:"title has-text-white",children:t}),Object(a.jsx)("div",{children:n})]})})})})}},16:function(e,t,n){"use strict";var i=n(24),a=n(25),c=n(28),r=n(27),s=n(1),o=n.n(s),l=n(0),d=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={hasError:!1,message:"",name:""},a}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Something went wrong."}),Object(l.jsx)("p",{children:this.state.name}),Object(l.jsx)("p",{children:this.state.message}),Object(l.jsx)("p",{children:Object(l.jsx)("button",{className:"button",onClick:function(){return window.location.reload()},children:"Reload Page"})})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,message:e.message,name:e.name}}}]),n}(o.a.Component);t.a=d},19:function(e,t,n){e.exports={floatingContainer:"FloatingMessage_floatingContainer__1UbJ1",withShadow:"FloatingMessage_withShadow__z0I1L"}},35:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(23),r=n.n(c),s=n(12),o=(n(35),n(4)),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e){if("serviceWorker"in navigator){if(new URL("/pwa-tester",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pwa-tester","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):u(t,e)}))}}function u(e,t){var n=!1;navigator.serviceWorker.oncontrollerchange=function(){n||(n=!0,window.location.reload())},navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var j=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(o.a)(c,2),s=r[0],l=r[1],u=Object(i.useState)(null),j=Object(o.a)(u,2),b=j[0],h=j[1],p=Object(i.useState)(null),f=Object(o.a)(p,2),v=f[0],O=f[1];return Object(i.useEffect)((function(){var e=function(e){e.preventDefault(),O(e),console.log("Install prompt available!",e)};return window.addEventListener("beforeinstallprompt",e),function(){window.removeEventListener("beforeinstallprompt",e)}}),[]),Object(i.useEffect)((function(){var e=!1;return d({onUpdate:function(t){e||(console.log("onUpdate called! New content after windows closed!",t),h(t),a(!0))},onSuccess:function(t){e||(console.log("onSuccess called! Offline ready!",t),h(t),l(!0))}}),console.log("serviceWorker.register called"),function(){console.log("ignore set to true"),e=!0}}),[]),Object(i.useEffect)((function(){if("serviceWorker"in navigator){var e=!1;return navigator.serviceWorker.getRegistration().then((function(t){e||(console.log("Current sw registration",t),h(t),l(!!t),a(t&&!!t.waiting))})),function(){e=!0}}h(void 0)}),[]),{updateAvailable:n,offLineReady:s,registration:b,installPrompt:v}},b=n(0),h=a.a.createContext({updateAvailable:!1,offLineReady:!1,registration:null,installPrompt:null}),p=function(e){var t=e.children,n=j();return Object(b.jsx)(h.Provider,{value:n,children:t})},f=n(9),v=n(2),O=n(19),m=n.n(O);function x(e){var t=e.title,n=e.message,i=void 0===n?"":n,a=e.actionText,c=e.deleteClick,r=e.actionClick;return Object(b.jsx)("div",{className:m.a.floatingContainer+" notch-inset",children:Object(b.jsxs)("article",{className:"message is-primary "+m.a.withShadow,children:[Object(b.jsxs)("div",{className:"message-header",children:[Object(b.jsx)("p",{children:t}),Object(b.jsx)("button",{className:"delete is-medium","aria-label":"delete",onClick:c})]}),Object(b.jsxs)("div",{className:"message-body",children:[i,Object(b.jsx)("p",{children:Object(b.jsx)("button",{className:"button is-primary is-fullwidth is-outlined",onClick:r,children:a})})]})]})})}function g(){var e=Object(i.useContext)(h),t=e.updateAvailable,n=e.registration,a=e.installPrompt,c=Object(i.useState)(!0),r=Object(o.a)(c,2),s=r[0],l=r[1],d=Object(i.useState)(!0),u=Object(o.a)(d,2),j=u[0],p=u[1];if(j&&t){return Object(b.jsx)(x,{title:"New version of the app available!",actionText:"Update Now",message:Object(b.jsx)("p",{children:"New version will automatically load next visit after all open windows are closed."}),deleteClick:function(){return p(!1)},actionClick:function(){n.waiting.postMessage({type:"SKIP_WAITING"})}})}if(s&&a){return Object(b.jsx)(x,{title:"App available for installation!",actionText:"Install App",deleteClick:function(){return l(!1)},actionClick:function(){a.prompt(),a.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),l(!1)}))}})}return null}var w=n(16);function N(){return Object(b.jsxs)("p",{children:["Built: ","4/27/2021, 11:49:55 PM"]})}function k(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("div",{className:"content has-text-centered",children:[Object(b.jsxs)("p",{children:["PWA Tester by ",Object(b.jsx)("a",{href:"https://github.com/corwinm",children:"Corwin Marsh"}),". The source code is available on"," ",Object(b.jsxs)("a",{href:"https://github.com/corwinm/pwa-tester",children:[" ",Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fab fa-github"})}),"GitHub"]}),Object(b.jsxs)("a",{href:"https://googlechrome.github.io/lighthouse/viewer/?gist=6ac7f4fd8b349c903dfcf04d2ff88e3e",children:[" ",Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fab fa-chrome"})}),"Lighthouse Score"]})]}),Object(b.jsx)(N,{})]})})}var y=n(14),C=n(13);function S(e){var t=function(e){return[{description:"Geolocation",route:"/geolocation",supported:navigator.geolocation},{description:"Camera",route:"/camera",supported:navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},{description:"Notifications",route:"/notifications",supported:"Notification"in window},{description:"Payments",supported:e&&e.paymentManager},{description:"Motion",route:"/device/motion",supported:window.DeviceMotionEvent},{description:"Orientation",route:"/device/orientation",supported:window.DeviceOrientationEvent},{description:"Vibration",supported:navigator.vibrate},{description:"Online Status",supported:"onLine"in navigator},{description:"Clipboard",supported:navigator.clipboard},{description:"Web Share",supported:navigator.share},{description:"Push Notifications",supported:e&&"pushManager"in e},{description:"Background Sync",supported:e&&"sync"in e}]}(e.registration).map((function(e,t){return Object(b.jsx)(W,Object(C.a)({},e),t)})).reduce((function(e,t,n){return n%3===0&&e.push([]),e[e.length-1].push(t),e}),[]).map((function(e,t){return Object(b.jsx)("div",{className:"tile is-ancestor",children:e},t)}));return Object(b.jsx)(y.a,{title:"Features",children:t})}function W(e){var t=e.description,n=e.supported,i=e.route;return null===n?Object(b.jsx)("div",{className:"tile is-parent",children:Object(b.jsxs)("article",{className:"tile is-child box notification is-primary",children:[Object(b.jsx)("p",{className:"title",children:t}),Object(b.jsx)("p",{className:"subtitle",children:"Loading..."})]})}):n?Object(b.jsx)("div",{className:"tile is-parent",children:Object(b.jsxs)("article",{className:"tile is-child box notification is-success has-text-black",children:[Object(b.jsx)("p",{className:"title",children:t}),Object(b.jsxs)("p",{className:"subtitle",children:["Supported"," ",i&&Object(b.jsx)(f.b,{to:i,"aria-label":t,style:{textDecoration:"none"},children:Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fas fa-arrow-circle-right"})})})]})]})}):Object(b.jsx)("div",{className:"tile is-parent",children:Object(b.jsxs)("article",{className:"tile is-child box notification is-danger has-text-black",children:[Object(b.jsx)("p",{className:"title",children:t}),Object(b.jsx)("p",{className:"subtitle",children:"Not Supported"})]})})}function A(e){var t=e.registration;return t?Object(b.jsxs)(y.a,{title:"Details",children:[Object(b.jsxs)("div",{children:["Active State: ",t.active&&t.active.state]}),Object(b.jsxs)("div",{children:["Waiting State: ",t.waiting&&t.waiting.state]}),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&Object(b.jsx)("div",{children:"Display mode is standalone"})]}):null}function E(){var e=Object(i.useContext)(h),t="serviceWorker"in navigator?"ServiceWorker Supported!":"ServiceWorker NOT Supported!";return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("section",{className:"hero is-primary notch-inset-item",children:Object(b.jsx)("div",{className:"hero-body",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"title",children:t}),Object(b.jsx)("button",{className:"button is-primary is-inverted is-outlined",onClick:function(){alert("This is going to be something really great someday!")},children:"Call to Action!"})]})})}),Object(b.jsx)(A,{registration:e.registration}),Object(b.jsx)(S,{registration:e.registration})]})}var L=n(11),M=n.n(L),P=n(15);function T(){var e=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({title:"PWA Tester",text:"PWA Tester",url:window.location.href});case 3:console.log("Successful share."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error sharing:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("button",{className:"button is-primary",onClick:e,disabled:!navigator.share,children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fas fa-share"})}),Object(b.jsx)("span",{children:"Share"})]})}function I(){var e=Object(i.useContext)(h),t=e.registration,n=e.updateAvailable,a=Object(i.useState)(!1),c=Object(o.a)(a,2),r=c[0],s=c[1];if(!t)return null;if(n){return Object(b.jsxs)("button",{className:"button is-info",onClick:function(){t.waiting.postMessage({type:"SKIP_WAITING"})},children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fas fa-sync"})}),Object(b.jsx)("span",{children:"Update Now"})]})}function l(){return(l=Object(P.a)(M.a.mark((function e(){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,t.update();case 3:n=e.sent,console.log(n),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("button",{className:"button is-info",onClick:function(){return l.apply(this,arguments)},children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fas fa-sync"+(r?" fa-spin":"")})}),Object(b.jsx)("span",{children:r?"Updating":"Check for Update"})]})}function U(e){var t=e.children;return Object(b.jsx)("nav",{className:"navbar is-transparent is-fixed-top notch-inset-item",role:"navigation","aria-label":"main navigation",children:t})}function D(e){var t=e.children,n=e.menuOpen;return Object(b.jsx)("div",{className:"navbar-menu "+(n?"is-active":""),children:t})}function F(e){var t=e.menuOpen,n=e.toggleMenu;return Object(b.jsxs)("a",{tabIndex:"0",role:"button",className:"navbar-burger burger "+(t?"is-active":""),onClick:n,"aria-label":"menu","aria-expanded":t,children:[Object(b.jsx)("span",{"aria-hidden":"true"}),Object(b.jsx)("span",{"aria-hidden":"true"}),Object(b.jsx)("span",{"aria-hidden":"true"})]})}function z(e){var t=e.toggleMenu;function n(e){return Object(b.jsx)(f.b,Object(C.a)(Object(C.a)({},e),{},{exact:!0,onClick:t,className:"navbar-item",activeClassName:"has-text-link"}))}return Object(b.jsxs)("div",{className:"navbar-start",children:[Object(b.jsx)(n,{to:"/",children:"Home"}),Object(b.jsx)(n,{to:"/about",children:"About"}),Object(b.jsx)(n,{to:"/geolocation",children:"Geolocation"}),Object(b.jsx)(n,{to:"/notifications",children:"Notifications"}),Object(b.jsx)(n,{to:"/camera",children:"Camera"}),Object(b.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(b.jsx)("a",{className:"navbar-link",tabIndex:"0",children:"Device"}),Object(b.jsxs)("div",{className:"navbar-dropdown is-boxed",children:[Object(b.jsx)(n,{to:"/device/orientation",children:"Orientation"}),Object(b.jsx)(n,{to:"/device/motion",children:"Motion"})]})]})]})}function _(){return Object(b.jsx)("div",{className:"navbar-end",children:Object(b.jsx)("div",{className:"navbar-item",children:Object(b.jsxs)("div",{className:"buttons",children:[Object(b.jsx)(I,{}),Object(b.jsx)(T,{})]})})})}function B(e){var t=e.onClick;return navigator.standalone?Object(b.jsx)("a",{className:"navbar-item",tabIndex:"0",onClick:t,children:Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)("i",{className:"fas fa-arrow-left"})})}):null}var G=Object(v.e)((function(e){var t=Object(i.useState)(!1),n=Object(o.a)(t,2),a=n[0],c=n[1];function r(){c(!a)}return Object(b.jsxs)(U,{children:[Object(b.jsxs)("div",{className:"navbar-brand",children:[Object(b.jsx)(B,{onClick:e.history.goBack}),Object(b.jsx)(f.b,{to:"/",className:"navbar-item",children:"PWA Tester"}),Object(b.jsx)(F,{menuOpen:a,toggleMenu:r})]}),Object(b.jsxs)(D,{menuOpen:a,children:[Object(b.jsx)(z,{toggleMenu:r}),Object(b.jsx)(_,{})]})]})}));function R(){return function(){var e=Object(i.useState)(!("onLine"in navigator)||!navigator.onLine),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){var e=function(){return a(!0)},t=function(){return a(!1)};return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}()?Object(b.jsx)("section",{className:"notch-inset-item has-background-grey-lighter ",children:Object(b.jsx)("h1",{className:"navbar-item has-text-danger",children:"Offline"})}):null}function H(e){var t=e.location;return Object(i.useEffect)((function(){var e;console.log("Trace pageView",t),e=t,s.a.pageview("/pwa-tester"+e)}),[t]),null}function V(){return Object(b.jsx)(v.a,{path:"/",render:function(e){var t=e.location;return Object(b.jsx)(H,{location:t.pathname+t.search})}})}var J=Object(i.lazy)((function(){return n.e(3).then(n.bind(null,42))})),K=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,45))})),$=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,46))})),q=Object(i.lazy)((function(){return n.e(6).then(n.bind(null,47))})),Q=Object(i.lazy)((function(){return n.e(7).then(n.bind(null,48))})),X=Object(i.lazy)((function(){return n.e(8).then(n.bind(null,43))})),Y=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(p,{children:Object(b.jsxs)(f.a,{basename:"/pwa-tester",children:[Object(b.jsx)(V,{}),Object(b.jsx)(G,{}),Object(b.jsx)(R,{}),Object(b.jsx)("main",{role:"main",children:Object(b.jsx)(w.a,{children:Object(b.jsxs)(i.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading..."}),children:[Object(b.jsx)(v.a,{exact:!0,path:"/",component:E}),Object(b.jsx)(v.a,{path:"/about",component:J}),Object(b.jsx)(v.a,{path:"/geolocation",component:Q}),Object(b.jsx)(v.a,{path:"/notifications",component:X}),Object(b.jsx)(v.a,{path:"/camera",component:K}),Object(b.jsx)(v.a,{path:"/device/orientation",component:q}),Object(b.jsx)(v.a,{path:"/device/motion",component:$})]})})}),Object(b.jsx)(k,{}),Object(b.jsx)(g,{})]})})})},Z=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,44)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};s.a.initialize("UA-139919526-1",{testMode:!1}),r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(Y,{})}),document.getElementById("root")),d(),Z((function(e){var t=e.id,n=e.name,i=e.value;s.a.ga("send","event",{eventCategory:"Web Vitals",eventAction:n,eventValue:Math.round("CLS"===n?1e3*i:i),eventLabel:t,nonInteraction:!0})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.255f0c56.chunk.js.map
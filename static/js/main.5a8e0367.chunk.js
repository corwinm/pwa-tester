(this["webpackJsonppwa-tester"]=this["webpackJsonppwa-tester"]||[]).push([[0],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(1);var i=n(15),a=n(0);function c(e){var t=e.title,n=e.children;return Object(a.jsx)(i.a,{children:Object(a.jsx)("div",{className:"notch-inset-item",children:Object(a.jsx)("section",{className:"section",children:Object(a.jsxs)("div",{className:"container is-fluid",children:[Object(a.jsx)("h1",{className:"title has-text-white",children:t}),Object(a.jsx)("div",{children:n})]})})})})}},15:function(e,t,n){"use strict";var i=n(24),a=n(25),c=n(28),r=n(27),s=n(1),o=n.n(s),l=n(0),d=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={hasError:!1,message:"",name:""},a}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Something went wrong."}),Object(l.jsx)("p",{children:this.state.name}),Object(l.jsx)("p",{children:this.state.message}),Object(l.jsx)("p",{children:Object(l.jsx)("button",{className:"button",onClick:function(){return window.location.reload()},children:"Reload Page"})})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,message:e.message,name:e.name}}}]),n}(o.a.Component);t.a=d},18:function(e,t,n){e.exports={floatingContainer:"FloatingMessage_floatingContainer__1UbJ1",withShadow:"FloatingMessage_withShadow__z0I1L"}},33:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(23),r=n.n(c),s=(n(33),n(4)),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e){if("serviceWorker"in navigator){if(new URL("/pwa-tester",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pwa-tester","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}function d(e,t){var n=!1;navigator.serviceWorker.oncontrollerchange=function(){n||(n=!0,window.location.reload())},navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(s.a)(c,2),o=r[0],d=r[1],u=Object(i.useState)(null),j=Object(s.a)(u,2),b=j[0],h=j[1],p=Object(i.useState)(null),f=Object(s.a)(p,2),O=f[0],v=f[1];return Object(i.useEffect)((function(){var e=function(e){e.preventDefault(),v(e),console.log("Install prompt available!",e)};return window.addEventListener("beforeinstallprompt",e),function(){window.removeEventListener("beforeinstallprompt",e)}}),[]),Object(i.useEffect)((function(){var e=!1;return l({onUpdate:function(t){e||(console.log("onUpdate called! New content after windows closed!",t),h(t),a(!0))},onSuccess:function(t){e||(console.log("onSuccess called! Offline ready!",t),h(t),d(!0))}}),console.log("serviceWorker.register called"),function(){console.log("ignore set to true"),e=!0}}),[]),Object(i.useEffect)((function(){if("serviceWorker"in navigator){var e=!1;return navigator.serviceWorker.getRegistration().then((function(t){e||(console.log("Current sw registration",t),h(t),d(!!t),a(t&&!!t.waiting))})),function(){e=!0}}h(void 0)}),[]),{updateAvailable:n,offLineReady:o,registration:b,installPrompt:O}},j=n(0),b=a.a.createContext({updateAvailable:!1,offLineReady:!1,registration:null,installPrompt:null}),h=function(e){var t=e.children,n=u();return Object(j.jsx)(b.Provider,{value:n,children:t})},p=n(9),f=n(2),O=n(18),v=n.n(O);function m(e){var t=e.title,n=e.message,i=void 0===n?"":n,a=e.actionText,c=e.deleteClick,r=e.actionClick;return Object(j.jsx)("div",{className:v.a.floatingContainer+" notch-inset",children:Object(j.jsxs)("article",{className:"message is-primary "+v.a.withShadow,children:[Object(j.jsxs)("div",{className:"message-header",children:[Object(j.jsx)("p",{children:t}),Object(j.jsx)("button",{className:"delete is-medium","aria-label":"delete",onClick:c})]}),Object(j.jsxs)("div",{className:"message-body",children:[i,Object(j.jsx)("p",{children:Object(j.jsx)("button",{className:"button is-primary is-fullwidth is-outlined",onClick:r,children:a})})]})]})})}function x(){var e=Object(i.useContext)(b),t=e.updateAvailable,n=e.registration,a=e.installPrompt,c=Object(i.useState)(!0),r=Object(s.a)(c,2),o=r[0],l=r[1],d=Object(i.useState)(!0),u=Object(s.a)(d,2),h=u[0],p=u[1];if(h&&t){return Object(j.jsx)(m,{title:"New version of the app available!",actionText:"Update Now",message:Object(j.jsx)("p",{children:"New version will automatically load next visit after all open windows are closed."}),deleteClick:function(){return p(!1)},actionClick:function(){n.waiting.postMessage({type:"SKIP_WAITING"})}})}if(o&&a){return Object(j.jsx)(m,{title:"App available for installation!",actionText:"Install App",deleteClick:function(){return l(!1)},actionClick:function(){a.prompt(),a.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),l(!1)}))}})}return null}var g=n(15);function w(){return Object(j.jsxs)("p",{children:["Built: ","3/26/2021, 10:30:50 PM"]})}function N(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsxs)("div",{className:"content has-text-centered",children:[Object(j.jsxs)("p",{children:["PWA Tester by ",Object(j.jsx)("a",{href:"https://github.com/corwinm",children:"Corwin Marsh"}),". The source code is available on"," ",Object(j.jsxs)("a",{href:"https://github.com/corwinm/pwa-tester",children:[" ",Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fab fa-github"})}),"GitHub"]}),Object(j.jsxs)("a",{href:"https://googlechrome.github.io/lighthouse/viewer/?gist=6ac7f4fd8b349c903dfcf04d2ff88e3e",children:[" ",Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fab fa-chrome"})}),"Lighthouse Score"]})]}),Object(j.jsx)(w,{})]})})}var k=n(13),y=n(12);function S(e){var t=function(e){return[{description:"Geolocation",route:"/geolocation",supported:navigator.geolocation},{description:"Camera",route:"/camera",supported:navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},{description:"Notifications",route:"/notifications",supported:"Notification"in window},{description:"Payments",supported:e&&e.paymentManager},{description:"Motion",route:"/device/motion",supported:window.DeviceMotionEvent},{description:"Orientation",route:"/device/orientation",supported:window.DeviceOrientationEvent},{description:"Vibration",supported:navigator.vibrate},{description:"Online Status",supported:"onLine"in navigator},{description:"Clipboard",supported:navigator.clipboard},{description:"Web Share",supported:navigator.share},{description:"Push Notifications",supported:e&&"pushManager"in e},{description:"Background Sync",supported:e&&"sync"in e}]}(e.registration).map((function(e,t){return Object(j.jsx)(C,Object(y.a)({},e),t)})).reduce((function(e,t,n){return n%3===0&&e.push([]),e[e.length-1].push(t),e}),[]).map((function(e,t){return Object(j.jsx)("div",{className:"tile is-ancestor",children:e},t)}));return Object(j.jsx)(k.a,{title:"Features",children:t})}function C(e){var t=e.description,n=e.supported,i=e.route;return null===n?Object(j.jsx)("div",{className:"tile is-parent",children:Object(j.jsxs)("article",{className:"tile is-child box notification is-primary",children:[Object(j.jsx)("p",{className:"title",children:t}),Object(j.jsx)("p",{className:"subtitle",children:"Loading..."})]})}):n?Object(j.jsx)("div",{className:"tile is-parent",children:Object(j.jsxs)("article",{className:"tile is-child box notification is-success has-text-black",children:[Object(j.jsx)("p",{className:"title",children:t}),Object(j.jsxs)("p",{className:"subtitle",children:["Supported"," ",i&&Object(j.jsx)(p.b,{to:i,"aria-label":t,style:{textDecoration:"none"},children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-arrow-circle-right"})})})]})]})}):Object(j.jsx)("div",{className:"tile is-parent",children:Object(j.jsxs)("article",{className:"tile is-child box notification is-danger has-text-black",children:[Object(j.jsx)("p",{className:"title",children:t}),Object(j.jsx)("p",{className:"subtitle",children:"Not Supported"})]})})}function W(e){var t=e.registration;return t?Object(j.jsxs)(k.a,{title:"Details",children:[Object(j.jsxs)("div",{children:["Active State: ",t.active&&t.active.state]}),Object(j.jsxs)("div",{children:["Waiting State: ",t.waiting&&t.waiting.state]}),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&Object(j.jsx)("div",{children:"Display mode is standalone"})]}):null}function A(){var e=Object(i.useContext)(b),t="serviceWorker"in navigator?"ServiceWorker Supported!":"ServiceWorker NOT Supported!";return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("section",{className:"hero is-primary notch-inset-item",children:Object(j.jsx)("div",{className:"hero-body",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{className:"title",children:t}),Object(j.jsx)("button",{className:"button is-primary is-inverted is-outlined",onClick:function(){alert("This is going to be something really great someday!")},children:"Call to Action!"})]})})}),Object(j.jsx)(W,{registration:e.registration}),Object(j.jsx)(S,{registration:e.registration})]})}var E=n(11),L=n.n(E),M=n(14);function P(){var e=function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({title:"PWA Tester",text:"PWA Tester",url:window.location.href});case 3:console.log("Successful share."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error sharing:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("button",{className:"button is-primary",onClick:e,disabled:!navigator.share,children:[Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-share"})}),Object(j.jsx)("span",{children:"Share"})]})}function T(){var e=Object(i.useContext)(b),t=e.registration,n=e.updateAvailable,a=Object(i.useState)(!1),c=Object(s.a)(a,2),r=c[0],o=c[1];if(!t)return null;if(n){return Object(j.jsxs)("button",{className:"button is-info",onClick:function(){t.waiting.postMessage({type:"SKIP_WAITING"})},children:[Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-sync"})}),Object(j.jsx)("span",{children:"Update Now"})]})}function l(){return(l=Object(M.a)(L.a.mark((function e(){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,t.update();case 3:n=e.sent,console.log(n),o(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("button",{className:"button is-info",onClick:function(){return l.apply(this,arguments)},children:[Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-sync"+(r?" fa-spin":"")})}),Object(j.jsx)("span",{children:r?"Updating":"Check for Update"})]})}function I(e){var t=e.children;return Object(j.jsx)("nav",{className:"navbar is-transparent is-fixed-top notch-inset-item",role:"navigation","aria-label":"main navigation",children:t})}function U(e){var t=e.children,n=e.menuOpen;return Object(j.jsx)("div",{className:"navbar-menu "+(n?"is-active":""),children:t})}function D(e){var t=e.menuOpen,n=e.toggleMenu;return Object(j.jsxs)("a",{tabIndex:"0",role:"button",className:"navbar-burger burger "+(t?"is-active":""),onClick:n,"aria-label":"menu","aria-expanded":t,children:[Object(j.jsx)("span",{"aria-hidden":"true"}),Object(j.jsx)("span",{"aria-hidden":"true"}),Object(j.jsx)("span",{"aria-hidden":"true"})]})}function F(e){var t=e.toggleMenu;function n(e){return Object(j.jsx)(p.b,Object(y.a)(Object(y.a)({},e),{},{exact:!0,onClick:t,className:"navbar-item",activeClassName:"has-text-link"}))}return Object(j.jsxs)("div",{className:"navbar-start",children:[Object(j.jsx)(n,{to:"/",children:"Home"}),Object(j.jsx)(n,{to:"/about",children:"About"}),Object(j.jsx)(n,{to:"/geolocation",children:"Geolocation"}),Object(j.jsx)(n,{to:"/notifications",children:"Notifications"}),Object(j.jsx)(n,{to:"/camera",children:"Camera"}),Object(j.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(j.jsx)("a",{className:"navbar-link",tabIndex:"0",children:"Device"}),Object(j.jsxs)("div",{className:"navbar-dropdown is-boxed",children:[Object(j.jsx)(n,{to:"/device/orientation",children:"Orientation"}),Object(j.jsx)(n,{to:"/device/motion",children:"Motion"})]})]})]})}function z(){return Object(j.jsx)("div",{className:"navbar-end",children:Object(j.jsx)("div",{className:"navbar-item",children:Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsx)(T,{}),Object(j.jsx)(P,{})]})})})}function _(e){var t=e.onClick;return navigator.standalone?Object(j.jsx)("a",{className:"navbar-item",tabIndex:"0",onClick:t,children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-arrow-left"})})}):null}var B=Object(f.e)((function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1];function r(){c(!a)}return Object(j.jsxs)(I,{children:[Object(j.jsxs)("div",{className:"navbar-brand",children:[Object(j.jsx)(_,{onClick:e.history.goBack}),Object(j.jsx)(p.b,{to:"/",className:"navbar-item",children:"PWA Tester"}),Object(j.jsx)(D,{menuOpen:a,toggleMenu:r})]}),Object(j.jsxs)(U,{menuOpen:a,children:[Object(j.jsx)(F,{toggleMenu:r}),Object(j.jsx)(z,{})]})]})}));function G(){return function(){var e=Object(i.useState)(!("onLine"in navigator)||!navigator.onLine),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){var e=function(){return a(!0)},t=function(){return a(!1)};return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}()?Object(j.jsx)("section",{className:"notch-inset-item has-background-grey-lighter ",children:Object(j.jsx)("h1",{className:"navbar-item has-text-danger",children:"Offline"})}):null}var R=n(21);function H(e){var t=e.location;return Object(i.useEffect)((function(){var e;console.log("Trace pageView",t),e=t,R.a.pageview("/pwa-tester"+e)}),[t]),null}function J(){return Object(j.jsx)(f.a,{path:"/",render:function(e){var t=e.location;return Object(j.jsx)(H,{location:t.pathname+t.search})}})}R.a.initialize("UA-139919526-1",{testMode:!1});var K=Object(i.lazy)((function(){return n.e(3).then(n.bind(null,42))})),V=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,45))})),$=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,46))})),q=Object(i.lazy)((function(){return n.e(6).then(n.bind(null,47))})),Q=Object(i.lazy)((function(){return n.e(7).then(n.bind(null,48))})),X=Object(i.lazy)((function(){return n.e(8).then(n.bind(null,43))})),Y=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(h,{children:Object(j.jsxs)(p.a,{basename:"/pwa-tester",children:[Object(j.jsx)(J,{}),Object(j.jsx)(B,{}),Object(j.jsx)(G,{}),Object(j.jsx)("main",{role:"main",children:Object(j.jsx)(g.a,{children:Object(j.jsxs)(i.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading..."}),children:[Object(j.jsx)(f.a,{exact:!0,path:"/",component:A}),Object(j.jsx)(f.a,{path:"/about",component:K}),Object(j.jsx)(f.a,{path:"/geolocation",component:Q}),Object(j.jsx)(f.a,{path:"/notifications",component:X}),Object(j.jsx)(f.a,{path:"/camera",component:V}),Object(j.jsx)(f.a,{path:"/device/orientation",component:q}),Object(j.jsx)(f.a,{path:"/device/motion",component:$})]})})}),Object(j.jsx)(N,{}),Object(j.jsx)(x,{})]})})})},Z=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,44)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(Y,{})}),document.getElementById("root")),Z(console.log)}},[[41,1,2]]]);
//# sourceMappingURL=main.5a8e0367.chunk.js.map